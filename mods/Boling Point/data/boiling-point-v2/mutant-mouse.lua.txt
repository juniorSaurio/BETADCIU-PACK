idleoffsets = {'0', '0'}
leftoffsets = {'250', '-55'}
downoffsets = {'-9', '-6'}
upoffsets = {'29', '140'}
rightoffsets = {'-81', '-15'}

--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
name_of_character = 'mutant'
doIdle = true

function onCreate()

	makeAnimatedLuaSprite(name_of_character, 'characters/mutant mouse', -300, 1050);
	addAnimationByPrefix(name_of_character, 'idle', 'MONSTER IDLE', 24, false);
	addAnimationByPrefix(name_of_character,'singLEFT','MONSTER LEFT',24, false)
	addAnimationByPrefix(name_of_character,'singDOWN','MONSTER DOWN',24, false)
	addAnimationByPrefix(name_of_character,'singUP','MONSTER UP',24, false)
	addAnimationByPrefix(name_of_character,'singRIGHT','MONSTER RIGHT',24, false)

	setProperty(name_of_character..'.antialiasing', false);
	setPropertyLuaSprite(name_of_character, 'flipX', false);
	scaleObject(name_of_character, 1,1);

end

local singAnims = {"singLEFT", "singDOWN", "singUP", "singRIGHT"}
function opponentNoteHit(id, direction, noteType, isSustainNote)
	if curStep >= 2095 and curStep <= 2112 then
		doIdle = false
		objectPlayAnimation(name_of_character, singAnims[direction + 1], true);

		if direction == 0 then
			setProperty(name_of_character .. '.offset.x', leftoffsets[1]);
			setProperty(name_of_character .. '.offset.y', leftoffsets[2]);

			if isSustainNote then
				objectPlayAnimation(name_of_character, singAnims[direction + 1], true);
			end
		elseif direction == 1 then
			setProperty(name_of_character .. '.offset.x', downoffsets[1]);
			setProperty(name_of_character .. '.offset.y', downoffsets[2]);

			if isSustainNote then
				objectPlayAnimation(name_of_character, singAnims[direction + 1], true);
			end
		elseif direction == 2 then
			setProperty(name_of_character .. '.offset.x', upoffsets[1]);
			setProperty(name_of_character .. '.offset.y', upoffsets[2]);

			if isSustainNote then
				objectPlayAnimation(name_of_character, singAnims[direction + 1], true);
			end
		elseif direction == 3 then
			setProperty(name_of_character .. '.offset.x', rightoffsets[1]);
			setProperty(name_of_character .. '.offset.y', rightoffsets[2]);

			if isSustainNote then
				objectPlayAnimation(name_of_character, singAnims[direction + 1], true);
			end
		end
	end

end


function onUpdate(elapsed)

    if curStep == 2094 then
    	addLuaSprite(name_of_character,true)
    	setProperty(name_of_character..'.alpha',0.7)
        doTweenX("appearMutantX", name_of_character, getProperty(name_of_character..'.x') + 200, 0.4, "circOut")
    end

    if curStep == 2110 then
    	doTweenX("disappearMutantX", name_of_character, getProperty(name_of_character..'.x') - 200, 0.3, "circOut")
    end
end

function onTweenCompleted(tag)

	if tag == 'disappearMutantX' then
		removeLuaSprite(name_of_character)
	end
end